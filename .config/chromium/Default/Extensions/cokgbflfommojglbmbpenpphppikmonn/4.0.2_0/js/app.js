Error=function(e,d,a){var c=document.getElement(".messages").removeClass("hide");var b=c.getElement(".alert-message.error").removeClass("hide");b.getElement("p").set("html","<strong>{0}</strong> {1}".substitute([e,d]));b.getElement("a").fireEvent("click",event,3000);if(a){a.getParent(".clearfix").addClass("error")}};window.addEvent("domready",function(){new Fx.SmoothScroll({offset:{y:-50},links:'a[scroll][href^="#"]',wheelStops:true});window.addEvent("scroll",function(d){var a=window.getSize().y+window.getScroll().y;var c=document.getElement('form[name="request"]');var e=c.getCoordinates();var b=c.getElement(".actions");if(a-200<=e.top||a>=e.bottom){b.removeClass("fixed")}else{b.addClass("fixed")}});document.getElements("a.minimize").addEvent("click",function(a){a.preventDefault();var b=this.getParent(".page").getElement("section");if(b.isDisplayed()){b.hide()}else{b.show()}});if("options" in document.createElement("datalist")==false){new AutoComplete()}document.getElements("ul.pills li a").addEvent("click",function(b){b.preventDefault();var a=this.getParent("ul");a.getElements(".active").removeClass("active");this.getParent().addClass("active");a.getNext("ul").getElements(" > li").addClass("hide");a.getNext("ul").getElement(this.get("href")).getParent().removeClass("hide");_gaq.push(["_trackEvent",this.get("text"),"clicked"])});document.addEvent("blur:relay(.error)",function(a){this.removeClass("error")});document.getElement('form[name="options"] input[name="help"]').addEvent("change",function(a){if(this.get("checked")){document.getElements(".help-block").addClass("hide")}else{document.getElements(".help-block").removeClass("hide")}});document.getElement('form[name="options"] input[name="lines"]').addEvent("change",function(a){if(this.get("checked")){document.getElements(".prettyprint").removeClass("linenums")}else{document.getElements(".prettyprint").addClass("linenums")}});document.getElements('form[name="options"] input[name="theme"]').addEvent("change",function(a){if(this.get("checked")){var b=this.get("value");document.getElement('select[name="theme"] option[value="'+b+'"]').set("selected",true);document.head.getElementById("theme").set("href","css/prettify/"+b+".css");_gaq.push(["_trackEvent","Theme",b])}}).fireEvent("change");document.getElements('select[name="theme"]').addEvent("change",function(a){document.head.getElementById("theme").set("href","css/prettify/"+this.get("value")+".css");_gaq.push(["_trackEvent","Theme Swap",this.get("value")])});document.getElement('form[name="options"]').addEvents({'click:relay(input[type="button"], input[type="submit"], input[type="reset"])':function(a){a.preventDefault();this.getParent("form").fireEvent(this.dataset.action,a)},submit:function(a){var b=this.toQueryString().parseQueryString();localStorage.setItem("options",JSON.encode(b))},reset:function(a){var b=JSON.decode(localStorage.getItem("options"));Object.each(b,function(e,d){var c=document.getElement('input[name="{0}"]:not([type="radio"]), input[type="radio"][name="{0}"][value="{1}"]'.substitute([d,e]));switch(c.get("type")){case"checkbox":c.set("checked",e=="on"?true:false).fireEvent("change");break;case"radio":c.set("checked",true).fireEvent("change");break}})}}).fireEvent("reset",new DOMEvent);document.getElements(".messages .alert-message a.close").addEvent("click",function(a){a.preventDefault();this.getParent(".messages").addClass("hide").getElements(".alert-message").addClass("hide")});document.getElements(".modals .modal-backdrop").addEvent("click",function(a){this.getParent(".modals").addClass("hide").getElements(".modal").addClass("hide")});document.getElements(".modals .modal-header a.close").addEvent("click",function(a){a.preventDefault();this.getParent(".modals").getElement(".modal-backdrop").fireEvent("click")});document.getElements('div.input-prepend > label.add-on > input[type="checkbox"]').addEvent("change",function(a){this.getParent("div.input-prepend > input, div.input-prepend > textarea").set("disabled",!this.get("checked"))}).fireEvent("change");document.getElements("ul.params, ul.headers").addEvents({"click:relay(.btn.success)":function(a){a.preventDefault();row=this.getParent().clone();this.getParent().grab(row,"before");row.getElements("input").set("disabled",false)[0].focus()},"click:relay(.btn.danger)":function(a){a.preventDefault();this.getParent().dispose()}});document.getElement("form.authorization.basic").addEvents({submit:function(c){c.preventDefault();var b=this.toQueryString().parseQueryString();var a=document.getElement('input[name="Authorization"]');a.set("value","Basic "+btoa(b.username+":"+b.password));a.getPrevious(".add-on").getElement('input[type="checkbox"]').set("checked",true).fireEvent("change");this.getParent(".modals").getElement(".modal-backdrop").fireEvent("click")},reset:function(a){document.getElement('input[name="Authorization"]').set("value",null);this.getParent(".modals").getElement(".modal-backdrop").fireEvent("click")}});document.getElement('form.authorization.oauth input[name="version"]').addEvent("change",function(){this.set("value",parseInt(this.get("value")).toFixed(1))});document.getElement("form.authorization.oauth").addEvents({'click:relay(input[type="button"], input[type="submit"], input[type="reset"])':function(a){a.preventDefault();this.getParent("form").fireEvent(this.dataset.action,a);_gaq.push(["_trackEvent","oAuth Form",this.dataset.action])},submit:function(b){b.preventDefault();var d=document.getElement('form[name="request"]');var f=d.toQueryString().parseQueryString();var g=this.toQueryString().parseQueryString();var h={path:f.uri,action:f.method,method:g.signature,parameters:{oauth_version:g.version,oauth_signature_method:g.signature},signatures:{consumer_key:g.consumer_key,shared_secret:g.consumer_secret,access_token:g.token_key,access_secret:g.token_secret}};if(g.scope.length>0){h.parameters.scope=g.scope}if(g.oauth_verifier.length>0){h.parameters.oauth_verifier=g.oauth_verifier}var c=document.getElement("ul.params");c.getElements("li").each(function(j){if(j.dataset.oauth){j.destroy()}});var a={keys:c.getElements('input[name="key"]').get("value"),values:c.getElements('input[name="value"]').get("value")};a.keys.each(function(k,j){if(k.length>0){h.parameters[k]=a.values[j]}});h.parameters=Object.toQueryString(h.parameters);var h=OAuthSimple().sign(h,g.separator);if(g.method=="header"){var i=document.getElement('input[name="Authorization"]').set("value",h.header);i.getPrevious(".add-on").getElement('input[type="checkbox"]').set("checked",true).fireEvent("change")}else{var i=document.getElement('input[name="Authorization"]').set("value","");i.getPrevious(".add-on").getElement('input[type="checkbox"]').set("checked",false).fireEvent("change");var e=h.signed_url.replace(f.uri+"?","").parseQueryString();Object.each(e,function(k,j){row=c.getElement("li:last-of-type").clone();row.dataset.oauth=true;row.getElement('input[name="key"]').set("value",j);row.getElement('input[name="value"]').set("value",k);row.getElements("input").set("disabled",false);row.inject(c,"top")})}if(g.oauth_callback.length>0){row=c.getElement("li:last-of-type").clone();row.dataset.oauth=true;row.getElement('input[name="key"]').set("value","oauth_callback");row.getElement('input[name="value"]').set("value",g.oauth_callback);row.getElements("input").set("disabled",false);row.inject(c,"top")}this.getParent(".modals").getElement(".modal-backdrop").fireEvent("click")},reset:function(a){chrome.extension.getBackgroundPage().oAuth.clear();defaults=JSON.decode(localStorage.getItem("oauth-defaults"));Object.each(defaults,function(d,c){var b=document.getElement('input[name="{0}"]'.substitute([c]));if(b){b.set("value",d).fireEvent("change",new DOMEvent)}})},save:function(a){var b={};b=this.toQueryString().parseQueryString();localStorage.setItem("oauth-defaults",JSON.encode(b))},authorize:function(b){var d=chrome.extension.getBackgroundPage().oAuth;var c=this.toQueryString().parseQueryString();var a=false;this.getElements("*[required], *[required-authorize]").each(function(e){if(e.get("value")==""){Error("Missing Data","Please Fill out all the required fields",e);a=true}}.bind(this));if(a){return}else{d.initialize({request_url:c.request_url,authorize_url:c.authorize_url,access_url:c.access_url,consumer_key:c.consumer_key,consumer_secret:c.consumer_secret,scope:c.scope,app_name:"REST Console"});d.authorize()}}}).fireEvent("reset",new DOMEvent);document.getElements('form.authorization.oauth input[name="token_key"], form.authorization.oauth input[name="token_secret"]').addEvent("change",function(d){var c=this.getParent("form");var a=c.getElement('input[name="token_key"]').get("value");var b=c.getElement('input[name="token_secret"]').get("value");if(a.length>0&&b.length>0){c.getElement('input[data-action="authorize"]').set("disabled",true)}else{c.getElement('input[data-action="authorize"]').set("disabled",false)}});document.getElements('input[name="highlight"]').addEvents({change:function(b){document.getElements(".prettyprint").each(function(f){f.set("text",f.retrieve("unstyled"))});if(this.get("checked")){var c=this.get("value");var e=document.id("responseBody");e.set("class","prettyprint lang-"+c);document.getElement('form[name="options"] input[name="lines"]').fireEvent("change");prettyPrint();var a=e.get("html");var d=new RegExp("\\b((https?|ftp|file)://[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])","gim");a=a.replace(d,'<a target="_blank" href="$1">$1</a>');e.set("html",a);e.scrollTo(0,0)}},click:function(a){this.set("checked",true);this.fireEvent("change",a)}});document.id("responseBody").addEvent("click:relay(a[href])",function(a){a.preventDefault();document.getElement('input[name="uri"]').set("value",this.get("href"));document.getElement('input[name="method"]').set("value","GET");document.getElement('form[name="request"]').fireEvent("submit",new DOMEvent)});document.getElement('form[name="request"] input[name="uri"]').addEvent("change",function(a){if(this.get("value").length>0&&this.get("value").substr(0,4)!="http"){this.set("value","http://"+this.get("value"))}});document.getElement('form[name="request"]').addEvents({'click:relay(input[type="button"], input[type="submit"], input[type="reset"])':function(a){a.preventDefault();if(this.dataset.action){this.getParent("form").fireEvent(this.dataset.action,a);_gaq.push(["_trackEvent","Request Form",this.dataset.action])}},"basic-auth":function(a){document.getElement(".modals").removeClass("hide").getElement(".modal.authorization.basic").removeClass("hide")},"oauth-setup":function(b){var a=document.getElement('input[name="uri"]');document.getElement(".modal.authorization.oauth").getElement('input[name="token_secret"]').fireEvent("change");if(a.get("value").length==0){a.focus();Error("Missing Data","Please provide a target URI before setting oAuth Authorization",a);return}document.getElement(".modals").removeClass("hide").getElement(".modal.authorization.oauth").removeClass("hide")},"oauth-refresh":function(a){document.getElement("form.authorization.oauth").fireEvent("submit",new DOMEvent)},save:function(a){var c={};c=this.toQueryString().parseQueryString();delete c.key;delete c.value;var e={};var d={};var b={keys:this.getElements('ul.headers input[name="key"]:not(:last-of-type)').get("value"),values:this.getElements('ul.headers input[name="value"]:not(:last-of-type)').get("value")};b.keys.each(function(g,f){if(g.length>0){d[g]=b.values[f]}});var b={keys:this.getElements('ul.params input[name="key"]:not(:last-of-type)').get("value"),values:this.getElements('ul.params input[name="value"]:not(:last-of-type)').get("value")};b.keys.each(function(g,f){if(g.length>0){e[g]=b.values[f]}});localStorage.setItem("request-headers-defaults",JSON.encode(d));localStorage.setItem("request-params-defaults",JSON.encode(e));localStorage.setItem("request-defaults",JSON.encode(c))},reset:function(b){b.preventDefault();var c={request:JSON.decode(localStorage.getItem("request-defaults")),params:JSON.decode(localStorage.getItem("request-params-defaults")),headers:JSON.decode(localStorage.getItem("request-headers-defaults"))};Object.each(c.request,function(g,f){var d=document.getElement('input[name="{0}"]'.substitute([f]));d.set("value",g);if(d.get("disabled")){var e=d.getPrevious(".add-on");d.set("disabled",false);if(e){e.getElement('input[type="checkbox"]').set("checked",true)}}});var a=document.getElement("ul.params");a.getElements("li:not(:last-of-type)").destroy();Object.each(c.params,function(e,d){row=a.getElement("li:last-of-type").clone();row.getElement('input[name="key"]').set("value",d);row.getElement('input[name="value"]').set("value",e);row.getElements("input").set("disabled",false);row.inject(a,"top")});var a=document.getElement("ul.headers");a.getElements("li:not(:last-of-type)").destroy();Object.each(c.headers,function(e,d){row=a.getElement("li:last-of-type").clone();row.getElement('input[name="key"]').set("value",d);row.getElement('input[name="value"]').set("value",e);row.getElements("input").set("disabled",false);row.inject(a,"top")})},submit:function(e){e.preventDefault();var c=false;var d=this.toQueryString().parseQueryString();var g=Object.clone(d);delete g.uri;delete g.method;delete g.timeout;delete g.raw;delete g.encoding;delete g.key;delete g.value;delete g.file_key;var a=["accept-charset","accept-encoding","content-length","cookie","date","connection","expect","referer","user-agent","via","proxy-authorization","te","upgrade"];var f={headers:{keys:this.getElements('ul.headers input[name="key"]').get("value"),values:this.getElements('ul.headers input[name="value"]').get("value")},data:{keys:this.getElements('ul.params input[name="key"]').get("value"),values:this.getElements('ul.params input[name="value"]').get("value")}};d.data={};f.data.keys.each(function(i,h){if(i.length>0){d.data[i]=f.data.values[h]}});f.headers.keys.each(function(i,h){if(a.contains(i.toLowerCase())){Error("Unsafe Header",'Refused to set unsafe header "'+i+'"',this.getElement('ul.headers input[name="key"]:nth-of-type('+(h+1)+")"));c=true}else{if(i.length>0){g[i]=f.headers.values[h]}}}.bind(this));this.getElements("*[required]").each(function(h){if(h.get("value").length==0){Error("Missing Data","Please Fill out all the required fields",h);c=true}});if(c){return false}else{if(d.encoding){d["Content-Type"]=d["Content-Type"]+"; charset="+d.encoding}var b={url:d.uri,method:d.method,encoding:d.encoding,timeout:d.timeout*1000,raw:d.raw,data:d.data,files:this.getElement('input[name="files"]').files,file_key:d.file_key,headers:g,onRequest:function(){document.getElement('form[name="request"] .actions').addClass("progress")},onProgress:function(h,i){},onTimeout:function(){Error("Error","Connection Timed-out");document.getElement('form[name="request"] .actions').removeClass("progress")},onCancel:function(){this.fireEvent("stop")}.bind(this),onComplete:function(){var o=this.xhr.responseText;var s=this.xhr.responseXML;document.id("rawBody").empty().set("class");document.id("responseBody").empty().set("class","prettyprint");document.id("responseHeaders").empty().set("class","prettyprint");document.id("responsePreview").empty();document.id("requestBody").empty().set("class","prettyprint");document.id("requestHeaders").empty().set("class","prettyprint");document.getElement('form[name="options"] input[name="lines"]').fireEvent("change");if(this.xhr.status==0){Error("Connection Failed!","Check your connectivity and try again");document.getElement('form[name="request"]').fireEvent("stop")}else{var p="Request Url: {0}\nRequest Method: {1}\nStatus Code: {2}\n".substitute([this.options.url,this.options.method,this.xhr.status]);if(this.options.files.length>0){p+="Files: {0}\n".substitute([beautify.js(JSON.encode(this.options.files))])}if(this.options.data!=""){switch(typeOf(this.options.data)){case"string":p+="Params: "+this.options.data;break;case"object":p+="Params: "+beautify.js(JSON.encode(this.options.data));break}}var m="";Object.each(this.options.headers,function(u,t){m+=t+": "+u+"\n"});var l={Accept:"*/*",Connection:"keep-alive","Content-Type":"application/xml",Origin:"chrome-extension: //rest-console-id","User-Agent":navigator.userAgent};Object.each(l,function(u,t){if(this.options.headers[t]==undefined){m+=t+": "+u+"\n"}}.bind(this));var i="Status Code: {0}\n{1}".substitute([this.xhr.status,this.xhr.getAllResponseHeaders()]);document.id("rawBody").set("text",o);document.id("responseBody").set("text",o);document.id("responseHeaders").set("text",i).store("unstyled",i);document.id("requestBody").set("text",p).store("unstyled",p);document.id("requestHeaders").set("text",m).store("unstyled",m);var r=this.xhr.getResponseHeader("Content-Type");if(r!=null){var n=r.indexOf(";");if(n>1){r=r.slice(0,n)}}var h="auto";switch(r){case"text/css":h="css";o=beautify.css(o);document.id("responseBody").set("text",o);break;case"application/ecmascript":case"application/javascript":case"application/json":h="js";o=beautify.js(o);document.id("responseBody").set("text",o);break;case"application/atom+xml":case"application/atomcat+xml":case"application/atomserv+xml":case"application/beep+xml":case"application/davmount+xml":case"application/docbook+xml":case"application/rdf+xml":case"application/rss+xml":case"application/xml":case"application/xspf+xml":case"application/vnd.google-earth.kml+xml":case"application/vnd.mozilla.xul+xml":case"image/svg+xml":case"text/xml":h="xml";var j=o.match(/^(\s*)(<\?xml.+?\?>)/i);o=j[2]+"\n"+beautify.xml(s).firstChild.nodeValue;document.id("responseBody").set("text",o);break;case"text/html":case"application/xhtml+xml":h="html";document.id("responseBody").set("text",o);document.getElement('input[name="highlight"][value="html"]').fireEvent("click");var k=new IFrame();document.id("responsePreview").adopt(k);var q=k.contentWindow.document;q.open();q.write(o);q.close();break}document.id("responseBody").store("unstyled",o);document.getElement('input[name="highlight"][value="'+h+'"]').fireEvent("click");document.getElement('a[href="#response"]').fireEvent("click",new DOMEvent());document.getElement('form[name="request"] .actions').removeClass("progress")}}};if(b.files.length>0){delete b.headers["Content-Type"]}window.XHR=new RESTRequest(b).send()}},get:function(a){this.getElement('input[name="method"]').set("value","GET");this.fireEvent("submit",a)},post:function(a){this.getElement('input[name="method"]').set("value","POST");this.fireEvent("submit",a)},put:function(a){this.getElement('input[name="method"]').set("value","PUT");this.fireEvent("submit",a)},"delete":function(a){this.getElement('input[name="method"]').set("value","DELETE");this.fireEvent("submit",a)},stop:function(a){if(window.XHR){window.XHR.cancel()}document.getElement('form[name="request"] .actions').removeClass("progress")}}).fireEvent("reset",new DOMEvent)});