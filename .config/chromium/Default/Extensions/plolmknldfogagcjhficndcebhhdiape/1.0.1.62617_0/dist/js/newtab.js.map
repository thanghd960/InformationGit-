{"version":3,"sources":["js/node_modules/browser-pack/_prelude.js","js/js/newtab.js","js/js/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","checkFirstRun","isFirstRun","isNotFirstRun","Util","getBrowser","chrome","runtime","sendMessage","task","res","firstRun","localStorage","getItem","setItem","triggerFirstRunFlow","$","fadeIn","userBrowser","background","extension","getBackgroundPage","TILIBInstance","getParameterByName","window","_tr_ac_se","document","ready","css","focus","currentDate","getCurrentDate","html","on","windows","create","url","incognito","click","fadeOut","preventDefault","toggleClass","submit","console","log","location","Guid","val","hash","title","tabs","getURL","close","./util.js","2","compareLists","list1","list2","indexOf","getPromise","data","ajax","twelve","arguments","undefined","dateOptions","hour12","weekday","month","day","year","Date","toLocaleDateString","getCurrentTime","toLocaleTimeString","navigator","language","hour","minute","toLowerCase","updateClockOnDOM","clockEl","showSeconds","clock","querySelector","second","timeOptions","currentTime","innerHTML","getUserLocation","Promise","resolve","reject","response","xhr","XMLHttpRequest","open","send","onreadystatechange","readyState","status","JSON","parse","responseText","response2","xhr2","loc_obj","ip","city","state","lat","latitude","lng","longitude","getUserWeather","method","action","type","getCookie","cookieInfo","domain","name","cookies","getAll","value","catFromCookie","stringify","ca","cookie","split","c","charAt","substring","match","RegExp","exec","search","decodeURIComponent","replace","ua","userAgent","setBrowserSetting","getBrowserSetting","defValue","settingVal","jsonp","callback","callbackName","Math","round","random","head","removeChild","script","createElement","src","appendChild"],"mappings":"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","file":"newtab.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","const Util = require(\"./util.js\");\nconst userBrowser = Util.getBrowser();\n\n// Check whether we need to use the background page based on availability of extension api\nif(userBrowser === \"chrome\"){\n  var background = chrome.extension.getBackgroundPage();\n  var TILIBInstance=background.TILIBInstance;\n}\nelse if(userBrowser === \"firefox\") {\n  let userGuid = Util.getParameterByName(\"guid\") || \"\";\n}\n// Used for search autocomplete\nvar searchElement = 'search_field';\nif(searchElement && searchElement !== '')  window._tr_ac_se = searchElement;\n\n$( document ).ready( function() {\n  $('body').css('opacity', 1);\n\n  $(\"#search_field\").focus();\n  // Set Date on DOM\n  let currentDate = Util.getCurrentDate();\n  $(\"#current_date\").html(currentDate);\n\n$('.file-upload-container-pdf').on('click', function(e) {\n  chrome.windows.create({ url: \"https://smallpdf.com/word-to-pdf\", \"incognito\": true});\n});\n$('.file-upload-container-doc').on('click', function(e) {\n  chrome.windows.create({ url: \"https://smallpdf.com/pdf-to-word\", \"incognito\": true});\n});\n\n\n\n//PDF Container\n\n  $('body').click(function() {\n    $('#firstRunModal').fadeOut('slow');\n  });\n\n  checkFirstRun( () => {\n\n    triggerFirstRunFlow();\n  }, () => {\n\n  });\n\n\n  $(document).on(\"click\", \".closeBubble_B\", function(e) {\n    e.preventDefault();\n    $(\"#firstRunModal\").fadeOut();\n  });\n\n  // General Newtab handlers\n  $(\".starBtn\").click(function() {\n    $(\".linksBox\").toggleClass(\"expand\");\n  });\n  $(\"button#doSearch\").click(function(e){\n    e.preventDefault();\n    $(\"#searchForm\").submit();\n  });\n  $(\"#searchForm\").submit(function(e){\n\n    e.preventDefault();\n    chrome.runtime.sendMessage({task: 'getGuid'}, function (res) {\n      console.log(res);\n      window.location = \"http://services.srchweb.org/crx/search.php?guid=\" + res.Guid + \"&k=\" + $(\"#search_field\").val();\n    });\n  });\n\n});\n\n// Check first run, if chrome use chrome api, otherwise use browser local storage\nfunction checkFirstRun(isFirstRun, isNotFirstRun) {\n  var browser = Util.getBrowser();\n  if(browser === \"chrome\") {\n    chrome.runtime.sendMessage({task:\"isFirstRun\"}, function(res){\n      if(res.firstRun && typeof isFirstRun === \"function\"){\n        isFirstRun();\n      }\n      else if(typeof isNotFirstRun === \"function\") {\n        isNotFirstRun();\n      }\n    });\n  }\n  else {\n    var fr = localStorage.getItem(\"firstRun\");\n    if(fr === null && typeof isFirstRun === \"function\") {\n      isFirstRun();\n      localStorage.setItem(\"firstRun\", false);\n    }\n    else if(typeof isNotFirstRun === \"function\") {\n      isNotFirstRun();\n    }\n  }\n}\n\nfunction triggerFirstRunFlow() {\n  $(\"#firstRunModal\").fadeIn(\"fast\");\n  $(\"#lightbox\").fadeIn(\"fast\");\n}\n\n\n\n// Check if the url contains our #newTab hash so we can open a page with it allowing us to focus on text input\nif (window.location.hash != '#newTab' && userBrowser === \"chrome\") {\n\twindow.document.title = 'Loading...';\n\tchrome.tabs.create({ url:chrome.extension.getURL(\"newtab/index.html#newTab\") });\n\twindow.close();\n}\n","// Check if two lists are equal\nfunction compareLists(list1, list2) {\n  // If they aren't the same length\n  if(list1.length !== list2.length) return false;\n  for (var i = 0; i < list1.length; i++) {\n    if(list2.indexOf(list1[i]) === -1) return false;\n  }\n  return true;\n}\n// Returns a promise object\nfunction getPromise(data) {\n  return $.ajax(data);\n}\n\nfunction getCurrentDate(twelve = true) {\n  let dateOptions = {\n    hour12 : twelve,\n    weekday : \"long\",\n    month : \"long\",\n    day : \"2-digit\",\n    year : \"numeric\"\n  };\n  let currentDate = new Date().toLocaleDateString(undefined, dateOptions);\n  return currentDate;\n}\n\n\n// Returns the current time as a string like \"5:30 pm\"\nfunction getCurrentTime() {\n  var currentTime = new Date().toLocaleTimeString(navigator.language, { hour : '2-digit', minute: '2-digit'} );\n  return currentTime.toLowerCase();\n}\n\nfunction updateClockOnDOM(clockEl, showSeconds = false) {\n  let clock = document.querySelector(clockEl);\n  let second = showSeconds ? '2-digit' : undefined;\n\n  let timeOptions = {\n    hour : '2-digit',\n    minute: '2-digit',\n    second\n  };\n  let currentTime = new Date().toLocaleTimeString(navigator.language,  timeOptions);\n  clock.innerHTML = currentTime;\n}\n\nfunction getUserLocation() {\n  let userLocation = new Promise(function(resolve, reject) {\n     \tvar xhr = new XMLHttpRequest();\n    \tvar response;\n    \txhr.open(\"GET\", \"http://jsonip.com/\", true);\n    \txhr.send();\n    \txhr.onreadystatechange = function() {\n    \t\tif(xhr.readyState !== 4) return false;\n    \t\tif(xhr.status !== 200) return false;\n    \t\tresponse = JSON.parse(xhr.responseText);\n    \t\tvar xhr2 = new XMLHttpRequest();\n    \t\tvar response2;\n    \t\tvar loc_obj = {};\n    \t\txhr2.open(\"GET\", \"http://www.tigeoip.com/?token=8765FRCfs!87&ip=\" + response.ip, true);\n    \t\txhr2.send();\n    \t\txhr2.onreadystatechange = function() {\n    \t\t\tif(xhr2.readyState !== 4) return false;\n    \t\t\tif(xhr2.status !== 200) return false;\n    \t\t\tresponse2 = JSON.parse(xhr2.responseText);\n    \t\t\tloc_obj.city = response2.city;\n    \t\t\tloc_obj.state = response2.state;\n    \t\t\tloc_obj.lat = response2.latitude;\n    \t\t\tloc_obj.lng = response2.longitude;\n    \t\t\tresolve(loc_obj);\n    \t\t};\n    \t};\n    });\n    return userLocation;\n}\n\nfunction getUserWeather(location) {\n  let weatherEndpoint = \"http://misc.services/products/weather_api/services/api/get.php\";\n  let xhrInfo = {\n    url: weatherEndpoint,\n    method : \"GET\",\n    data : {\n      action: \"current\",\n      type : \"city\",\n      city: location.city,\n      state: location.state || \"\"\n    }\n  };\n  let weatherInfo = getPromise(xhrInfo);\n  return weatherInfo;\n}\n\n\n// Uses chrome api to retrieve cookie name and value\nfunction getCookie(cookieInfo = { domain: \"\", name: \"\"}) {\n\n  if(cookieInfo.domain === \"\" && cookieInfo.name === \"\") return;\n\n  var p = new Promise((resolve, reject) => {\n    // Gets Cookies\n    if(getBrowser() === \"chrome\"){\n      chrome.cookies.getAll(cookieInfo, function(res) {\n        // If cookie exists pass value into exists callback\n        if(res.length > 0 && typeof res[0].value !== 'undefined'){\n          var catFromCookie = JSON.stringify([res[0].value]);\n          resolve(catFromCookie);\n          // if(typeof exists === \"function\") exists(catFromCookie);\n        }\n        // If it doesn't call absent() callback\n        else {\n          resolve(\"\");\n          // if(typeof absent === \"function\") absent();\n        }\n      });\n    }\n    // Requires to be on same domain\n    else {\n      var name = cookieInfo.name + \"=\";\n      var ca = document.cookie.split(';');\n      var val;\n      for(var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            val = c.substring(name.length, c.length);\n            resolve(val);\n        }\n      }\n      val = \"\";\n      resolve(val);\n    }\n  });\n\n  return p;\n\n}\n\nfunction getParameterByName(name) {\n  var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);\n  if(match !== null) {\n    if(typeof match[1] !== \"undefined\")\n      return decodeURIComponent(match[1].replace(/\\+/g, ' '));\n  }\n}\n\nfunction getBrowser() {\n    var ua = window.navigator.userAgent || \"\";\n    if (ua.indexOf(\"Chrome\") > -1) {\n        if (ua.indexOf(\"Edge\") == -1) {\n            return \"chrome\";\n        } else {\n            return \"other\";\n        }\n    } else if (ua.indexOf(\"Firefox\") > -1) {\n        return \"firefox\";\n    } else if (ua.indexOf(\"MSIE 8.0\") > -1) {\n\n        return \"ie8\";\n    } else {\n\n        // Any other browser logic\n        return \"other\";\n    }\n}\n\nfunction setBrowserSetting(name, value) {\n  localStorage.setItem(name, value);\n}\nfunction getBrowserSetting(name, defValue) {\n  var settingVal = localStorage.getItem(name);\n  if(settingVal === null || settingVal === undefined) settingVal = defValue;\n  return settingVal;\n}\n\nfunction jsonp(url, callback) {\n  var callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());\n  window[callbackName] = function(data) {\n      delete window[callbackName];\n      document.head.removeChild(script);\n      callback(data);\n  };\n\n  var script = document.createElement('script');\n  script.src = url + (url.indexOf('?') >= 0 ? '&' : '?') + 'callback=' + callbackName;\n  document.head.appendChild(script);\n}\n\n\nmodule.exports = {\n  getCookie,\n  compareLists,\n  getPromise,\n  getCurrentDate,\n  getCurrentTime,\n  getParameterByName,\n  getBrowser,\n  getBrowserSetting,\n  setBrowserSetting,\n  jsonp,\n  updateClockOnDOM,\n  getUserLocation,\n  getUserWeather\n};\n"]}