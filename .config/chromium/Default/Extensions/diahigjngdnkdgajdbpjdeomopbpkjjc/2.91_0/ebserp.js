var cValS=["#FFB59E","#B8FF9E","#D1F4FF","#DCD1FF","#FFFFAD"];var dM1n=["blog.cartercole.com","cartercole.com","seomoz.org","chrome.google.com"];var cL0r=[0,1,2,3];doit2=doit=true;function addC(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(b=/(\d+)(\d{3})/;b.test(x1);)x1=x1.replace(b,"$1,$2");return x1+x2}var mX=0;function d(b){b=parseFloat(b.replace("%",""))/100;if(b>mX)mX=b;return b}
chrome.extension.sendRequest({action:"cEnabled",feat:"ebserp"},function(b){nUmSERP(b);if(b.serpdemo==1)if(doit2){doit2=false;var e=parseUri(document.location);chrome.extension.sendRequest({action:"gSStat",word:e.queryKey.q},function(a){a=a.search.query.results.ArrayOfKeywordStats.keywordStats;if(a.Activity!="0"){$("sw_aside").insert({top:"<div id='fin' style='width:150px;margin-left:4px;padding-bottom:4px;margin-bottom:3px;border-bottom:1px solid #C9D7F1;'><a style='float:right;text-descoration:none;' title='Close Window' onclick=\"this.parentNode.style.display='none'\">x</a></div>"});
$("fin").insert("<h4 style='margin:2px;'>"+addC(a.Activity)+" searchs</h3>");$("fin").insert("<h6 style='margin:2px;'>CTR: "+a.CTR+"</h6>");$("fin").insert("<h6 style='margin:2px;'>CPC: "+a.CPC+"</h6>");parseInt(a.Demographics.Male.replace("%",""))+parseInt(a.Demographics.Female.replace("%",""))+parseInt(a.Demographics.GenderUnknown.replace("%",""))>20&&$("fin").insert("<img src='http://chart.apis.google.com/chart?cht=p&chd=t:"+a.Demographics.Male.replace("%","")+","+a.Demographics.Female.replace("%",
"")+","+a.Demographics.GenderUnknown.replace("%","")+"&chs=150x50&chl=Male|Female|?'>");var c="<br><img src='http://chart.apis.google.com/chart?cht=bhs&chs=150x88&chd=t:"+d(a.Demographics.Age65)+","+d(a.Demographics.Age50_65)+","+d(a.Demographics.Age35_50)+","+d(a.Demographics.Age25_35)+","+d(a.Demographics.Age18_25)+","+d(a.Demographics.Age13_18)+","+d(a.Demographics.Age0_13)+","+d(a.Demographics.AgeUnknown)+"&chds=0,"+mX+"&chbh=6&chm=N*p0*,444444,0,-1,10&chxt=y&chxl=0:|?|<+13|13-18|18-25|25-35|35-50|50-65|>+65'>";
mX>0&&$("fin").insert(c);$("fin").insert("<br><img src='"+a.Sparkline.replace("chs=100x40","chs=150x20")+"'>");$("fin").insert("<div style='text-align:right;font-size:8px;'>enhanced by <a href='http://j.mp/bSERP'>SEO Site Tools</a></div>")}})}e=b.hSd.evalJSON(true);cL0r=e.colr;dM1n=e.domains;b.hS==1&&$$("div.sb_tlst").each(function(a){var c=$(a).down("h3").down("a").href;c=parseUri(c);c=dM1n.indexOf(c.host.replace("www.",""));c>-1&&$(a).up("div").setStyle({backgroundColor:cValS[cL0r[c]],padding:"4px",
"border-radius":"6px"})});b.enabled==1&&$$("div.sb_tlst").each(function(a){var c=$(a).down("h3").down("a").href;chrome.extension.sendRequest({action:"gPR",url:c},function(f){$(a).down("h3").insert({before:"<img alt='"+f+"' src='"+chrome.extension.getURL("./pr/prc"+f.replace("?","-")+".gif")+"'>"})})})});
function nUmSERP(b){if(doit){doit=false;if(b==undefined)b={numserp:1};if(b.numserp==0){$("results_container").down("div").insert(" <a id='numserp' title='Number Results with SEO Site Tools' href='#'>#</a>");Event.observe("numserp","click",function(){this.hide();nUmSERP()});doit=true}nUm=parseUri(document.location);nUm="first"in nUm.queryKey?parseInt(nUm.queryKey.first)-1:0;b.numserp==1&&$$("div.sa_cc").each(function(e){nUm++;$(e).insert({top:"<h1 style='float:left;font-size:20px;font-weight:bold;padding:4px'>"+
nUm+"</h1>"})})}};